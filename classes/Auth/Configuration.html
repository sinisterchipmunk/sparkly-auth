<?xml version="1.0" encoding="iso-8859-1"?>
<!DOCTYPE html 
     PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
     "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
  <title>Class: Auth::Configuration</title>
  <meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1" />
  <meta http-equiv="Content-Script-Type" content="text/javascript" />
  <link rel="stylesheet" href="../.././rdoc-style.css" type="text/css" media="screen" />
  <script type="text/javascript">
  // <![CDATA[

  function popupCode( url ) {
    window.open(url, "Code", "resizable=yes,scrollbars=yes,toolbar=no,status=no,height=150,width=400")
  }

  function toggleCode( id ) {
    if ( document.getElementById )
      elem = document.getElementById( id );
    else if ( document.all )
      elem = eval( "document.all." + id );
    else
      return false;

    elemStyle = elem.style;
    
    if ( elemStyle.display != "block" ) {
      elemStyle.display = "block"
    } else {
      elemStyle.display = "none"
    }

    return true;
  }
  
  // Make codeblocks hidden by default
  document.writeln( "<style type=\"text/css\">div.method-source-code { display: none }</style>" )
  
  // ]]>
  </script>

</head>
<body>



    <div id="classHeader">
        <table class="header-table">
        <tr class="top-aligned-row">
          <td><strong>Class</strong></td>
          <td class="class-name-in-header">Auth::Configuration</td>
        </tr>
        <tr class="top-aligned-row">
            <td><strong>In:</strong></td>
            <td>
                <a href="../../files/lib/auth/configuration/keys_rb.html">
                lib/auth/configuration/keys.rb
                </a>
        <br />
                <a href="../../files/lib/auth/configuration_rb.html">
                lib/auth/configuration.rb
                </a>
        <br />
            </td>
        </tr>

        <tr class="top-aligned-row">
            <td><strong>Parent:</strong></td>
            <td>
                Object
            </td>
        </tr>
        </table>
    </div>
  <!-- banner header -->

  <div id="bodyContent">



  <div id="contextContent">



   </div>

    <div id="method-list">
      <h3 class="section-bar">Methods</h3>

      <div class="name-list">
      <a href="#M000116">add_configuration_key_with_delegation</a>&nbsp;&nbsp;
      <a href="#M000115">add_option_delegator_for</a>&nbsp;&nbsp;
      <a href="#M000126">apply!</a>&nbsp;&nbsp;
      <a href="#M000117">attr_accessor_with_delegator</a>&nbsp;&nbsp;
      <a href="#M000118">attr_writer_with_delegator</a>&nbsp;&nbsp;
      <a href="#M000127">authenticate</a>&nbsp;&nbsp;
      <a href="#M000121">base_controller</a>&nbsp;&nbsp;
      <a href="#M000122">behavior_classes</a>&nbsp;&nbsp;
      <a href="#M000119">behavior_configs</a>&nbsp;&nbsp;
      <a href="#M000123">disable_route_generation!</a>&nbsp;&nbsp;
      <a href="#M000128">for_model</a>&nbsp;&nbsp;
      <a href="#M000124">generate_routes?</a>&nbsp;&nbsp;
      <a href="#M000125">new</a>&nbsp;&nbsp;
      <a href="#M000120">register_behavior</a>&nbsp;&nbsp;
      </div>
    </div>

  </div>


    <!-- if includes -->
    <div id="includes">
      <h3 class="section-bar">Included Modules</h3>

      <div id="includes-list">
        <span class="include-name"><a href="BehaviorLookup.html">Auth::BehaviorLookup</a></span>
        <span class="include-name"><a href="Configuration/Keys.html">Auth::Configuration::Keys</a></span>
        <span class="include-name"><a href="BehaviorLookup.html">Auth::BehaviorLookup</a></span>
      </div>
    </div>

    <div id="section">

    <div id="class-list">
      <h3 class="section-bar">Classes and Modules</h3>

      Module <a href="Configuration/Keys.html" class="link">Auth::Configuration::Keys</a><br />

    </div>




    <div id="attribute-list">
      <h3 class="section-bar">Attributes</h3>

      <div class="name-list">
        <table>
        <tr class="top-aligned-row context-row">
          <td class="context-item-name">account_created_message</td>
          <td class="context-item-value">&nbsp;[RW]&nbsp;</td>
          <td class="context-item-desc">
The message to display when the user creates an account.

<p>
Default:
</p>
<pre>
 &quot;Your account has been created.&quot;
</pre>
</td>
        </tr>
        <tr class="top-aligned-row context-row">
          <td class="context-item-name">account_deleted_message</td>
          <td class="context-item-value">&nbsp;[RW]&nbsp;</td>
          <td class="context-item-desc">
The message to display when the user deletes his or her account.

<p>
Default:
</p>
<pre>
 &quot;Your account has been deleted.&quot;
</pre>
</td>
        </tr>
        <tr class="top-aligned-row context-row">
          <td class="context-item-name">account_lock_duration</td>
          <td class="context-item-value">&nbsp;[RW]&nbsp;</td>
          <td class="context-item-desc">
The length of time an account is locked for, if it is locked.

<p>
Default:
</p>
<pre>
 30.minutes
</pre>
</td>
        </tr>
        <tr class="top-aligned-row context-row">
          <td class="context-item-name">account_locked_message</td>
          <td class="context-item-value">&nbsp;[RW]&nbsp;</td>
          <td class="context-item-desc">
The message to display if an account has been locked.

<p>
Default:
</p>
<pre>
 &quot;Account is locked due to too many invalid attempts.&quot;
</pre>
</td>
        </tr>
        <tr class="top-aligned-row context-row">
          <td class="context-item-name">account_updated_message</td>
          <td class="context-item-value">&nbsp;[RW]&nbsp;</td>
          <td class="context-item-desc">
The message to display when user profile has been updated or the password
has been changed.

<p>
Default:
</p>
<pre>
 &quot;Your changes have been saved.&quot;
</pre>
</td>
        </tr>
        <tr class="top-aligned-row context-row">
          <td class="context-item-name">authenticated_models</td>
          <td class="context-item-value">&nbsp;[RW]&nbsp;</td>
          <td class="context-item-desc">
The array of <a href="Model.html">Auth::Model</a> instances which represent
the models which will be authenticated. See also <a
href="Configuration.html#M000127">authenticate</a>

</td>
        </tr>
        <tr class="top-aligned-row context-row">
          <td class="context-item-name">base_controller_name</td>
          <td class="context-item-value">&nbsp;[RW]&nbsp;</td>
          <td class="context-item-desc">
The NAME of the controller to use as a base controller. All Sparkly
controllers will subclass this, and methods such as current_user will be
added to it. Defaults to &#8216;application&#8217;.

<p>
Default:
</p>
<pre>
 'application'
</pre>
</td>
        </tr>
        <tr class="top-aligned-row context-row">
          <td class="context-item-name">behaviors</td>
          <td class="context-item-value">&nbsp;[RW]&nbsp;</td>
          <td class="context-item-desc">
The array of behaviors which will be applied by default to every
authenticated model. If a behavior set is specified for a given model, it
will be used instead of (not in addition to) this array.

<p>
Default:
</p>
<pre>
 [ :core ]
</pre>
</td>
        </tr>
        <tr class="top-aligned-row context-row">
          <td class="context-item-name">default_accounts_controller_name</td>
          <td class="context-item-value">&nbsp;[RW]&nbsp;</td>
          <td class="context-item-desc">
The name of the controller to route to for creating users, editing them,
etc.

<pre>
 &quot;sparkly_accounts&quot;
</pre>
</td>
        </tr>
        <tr class="top-aligned-row context-row">
          <td class="context-item-name">default_destination</td>
          <td class="context-item-value">&nbsp;[RW]&nbsp;</td>
          <td class="context-item-desc">
If an issue would prevent the user from viewing the current page, <a
href="../Auth.html">Auth</a> will redirect the user to the value stored in
session[:destination]. If this value is not set, then <a
href="../Auth.html">Auth</a> will default to this path.

<p>
Default:
</p>
<pre>
 &quot;/&quot;
</pre>
</td>
        </tr>
        <tr class="top-aligned-row context-row">
          <td class="context-item-name">default_login_path</td>
          <td class="context-item-value">&nbsp;[RW]&nbsp;</td>
          <td class="context-item-desc">
The method to call in order to determine which resource to use when
implicitly logging in.

<p>
If set to nil, the default_destination will be used instead.
</p>
<p>
Default:
</p>
<pre>
 :new_user_session_path
</pre>
</td>
        </tr>
        <tr class="top-aligned-row context-row">
          <td class="context-item-name">default_sessions_controller_name</td>
          <td class="context-item-value">&nbsp;[RW]&nbsp;</td>
          <td class="context-item-desc">
The name of the controller to route to for logging in, logging out, etc.

<p>
Default:
</p>
<pre>
 &quot;sparkly_sessions&quot;
</pre>
</td>
        </tr>
        <tr class="top-aligned-row context-row">
          <td class="context-item-name">encryptor</td>
          <td class="context-item-value">&nbsp;[RW]&nbsp;</td>
          <td class="context-item-desc">
The class to use for encryption of passwords. This can be any class, as
long as it responds to encrypt and matches?

<p>
Default:
</p>
<pre>
 Auth::Encryptors::Sha512
</pre>
</td>
        </tr>
        <tr class="top-aligned-row context-row">
          <td class="context-item-name">invalid_credentials_message</td>
          <td class="context-item-value">&nbsp;[RW]&nbsp;</td>
          <td class="context-item-desc">
Message to display if username and/or password were incorrect.

<p>
Default:
</p>
<pre>
 &quot;Credentials were not valid.&quot;
</pre>
</td>
        </tr>
        <tr class="top-aligned-row context-row">
          <td class="context-item-name">login_after_signup</td>
          <td class="context-item-value">&nbsp;[RW]&nbsp;</td>
          <td class="context-item-desc">
If true, the user will be automatically logged in after registering a <a
href="Configuration.html#M000125">new</a> account. Note that this can be
modified by some behaviors.

<p>
Default:
</p>
<pre>
 true
</pre>
</td>
        </tr>
        <tr class="top-aligned-row context-row">
          <td class="context-item-name">login_required_message</td>
          <td class="context-item-value">&nbsp;[RW]&nbsp;</td>
          <td class="context-item-desc">
The message to display when the user is not allowed to view a page because
s/he must log in.

<p>
Default:
</p>
<pre>
 &quot;You must be signed in to view this page.&quot;
</pre>
</td>
        </tr>
        <tr class="top-aligned-row context-row">
          <td class="context-item-name">login_successful_message</td>
          <td class="context-item-value">&nbsp;[RW]&nbsp;</td>
          <td class="context-item-desc">
Message to display if login was successful.

<p>
Default:
</p>
<pre>
 &quot;Signed in successfully.&quot;
</pre>
</td>
        </tr>
        <tr class="top-aligned-row context-row">
          <td class="context-item-name">logout_message</td>
          <td class="context-item-value">&nbsp;[RW]&nbsp;</td>
          <td class="context-item-desc">
Message to display when user logs out.

<p>
Default:
</p>
<pre>
 &quot;You have been signed out.&quot;
</pre>
</td>
        </tr>
        <tr class="top-aligned-row context-row">
          <td class="context-item-name">logout_required_message</td>
          <td class="context-item-value">&nbsp;[RW]&nbsp;</td>
          <td class="context-item-desc">
The message to display when the user is not allowed to view a page because
s/he must log out.

<pre>
 &quot;You must be signed out to view this page.&quot;
</pre>
</td>
        </tr>
        <tr class="top-aligned-row context-row">
          <td class="context-item-name">max_login_failures</td>
          <td class="context-item-value">&nbsp;[RW]&nbsp;</td>
          <td class="context-item-desc">
The maximum login attempts permitted before an account is locked. Set to
nil to disable locking.

<p>
Default:
</p>
<pre>
 5
</pre>
</td>
        </tr>
        <tr class="top-aligned-row context-row">
          <td class="context-item-name">minimum_password_length</td>
          <td class="context-item-value">&nbsp;[RW]&nbsp;</td>
          <td class="context-item-desc">
Minimum length for passwords.

<p>
Default:
</p>
<pre>
 7
</pre>
</td>
        </tr>
        <tr class="top-aligned-row context-row">
          <td class="context-item-name">password_format</td>
          <td class="context-item-value">&nbsp;[RW]&nbsp;</td>
          <td class="context-item-desc">
Regular expression which passwords must match. The default forces at least
1 uppercase, lowercase and numeric character.

<p>
Default:
</p>
<pre>
 /(^(?=.*\d)(?=.*[a-zA-Z]).{7,}$)/
</pre>
</td>
        </tr>
        <tr class="top-aligned-row context-row">
          <td class="context-item-name">password_format_message</td>
          <td class="context-item-value">&nbsp;[RW]&nbsp;</td>
          <td class="context-item-desc">
When the password to be created does not conform to the above format, this
error message will be shown.

<p>
Default:
</p>
<pre>
 &quot;must contain at least 1 uppercase, 1 lowercase and 1 number&quot;
</pre>
</td>
        </tr>
        <tr class="top-aligned-row context-row">
          <td class="context-item-name">password_history_length</td>
          <td class="context-item-value">&nbsp;[RW]&nbsp;</td>
          <td class="context-item-desc">
The number of passwords to keep in the password change history for each
user. Any given user may not use the same password twice for at least this
duration. For instance, if set to 4, then a user must change his password 4
times before s/he can reuse one of his/her previous passwords.

<p>
Default:
</p>
<pre>
 4
</pre>
</td>
        </tr>
        <tr class="top-aligned-row context-row">
          <td class="context-item-name">password_uniqueness_message</td>
          <td class="context-item-value">&nbsp;[RW]&nbsp;</td>
          <td class="context-item-desc">
The message to display when password change matches one of the previous
passwords

<p>
Default:
</p>
<pre>
 &quot;must not be the same as any of your recent passwords&quot;
</pre>
</td>
        </tr>
        <tr class="top-aligned-row context-row">
          <td class="context-item-name">password_update_frequency</td>
          <td class="context-item-value">&nbsp;[RW]&nbsp;</td>
          <td class="context-item-desc">
How frequently should passwords be forced to change? Nil for never.

<p>
Default:
</p>
<pre>
 30.days
</pre>
</td>
        </tr>
        <tr class="top-aligned-row context-row">
          <td class="context-item-name">path</td>
          <td class="context-item-value">&nbsp;[R]&nbsp;</td>
          <td class="context-item-desc">
The path to the Sparkly <a href="../Auth.html">Auth</a> libraries.

</td>
        </tr>
        <tr class="top-aligned-row context-row">
          <td class="context-item-name">session_duration</td>
          <td class="context-item-value">&nbsp;[RW]&nbsp;</td>
          <td class="context-item-desc">
The maximum session duration. Users will be logged out automatically after
this period expires.

<p>
Default:
</p>
<pre>
 30.minutes
</pre>
</td>
        </tr>
        <tr class="top-aligned-row context-row">
          <td class="context-item-name">session_timeout_message</td>
          <td class="context-item-value">&nbsp;[RW]&nbsp;</td>
          <td class="context-item-desc">
Message to display when the user&#8216;s session times out due to
inactivity.

<p>
Default:
</p>
<pre>
 &quot;You have been signed out due to inactivity. Please sign in again.&quot;
</pre>
</td>
        </tr>
        </table>
      </div>
    </div>
      


    <!-- if method_list -->
    <div id="methods">
      <h3 class="section-bar">Public Class methods</h3>

      <div id="method-M000116" class="method-detail">
        <a name="M000116"></a>

        <div class="method-heading">
          <a href="#M000116" class="method-signature">
          <span class="method-name">add_configuration_key_with_delegation</span><span class="method-args">(*keys)</span>
          </a>
        </div>
      
        <div class="method-description">
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M000116-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M000116-source">
<pre>
<span class="ruby-comment cmt"># File lib/auth/configuration.rb, line 25</span>
      <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">add_configuration_key_with_delegation</span>(<span class="ruby-operator">*</span><span class="ruby-identifier">keys</span>)
        <span class="ruby-identifier">keys</span> = <span class="ruby-identifier">keys</span>.<span class="ruby-identifier">flatten</span>
        <span class="ruby-identifier">eig</span> = <span class="ruby-keyword kw">class</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-constant">Auth</span>; <span class="ruby-keyword kw">self</span>; <span class="ruby-keyword kw">end</span>
        <span class="ruby-identifier">eig</span>.<span class="ruby-identifier">instance_eval</span> { <span class="ruby-identifier">delegate</span> <span class="ruby-operator">*</span>[<span class="ruby-identifier">keys</span>, {<span class="ruby-identifier">:to</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">:configuration</span>}].<span class="ruby-identifier">flatten</span> }
        <span class="ruby-identifier">add_configuration_key_without_delegation</span>(<span class="ruby-operator">*</span><span class="ruby-identifier">keys</span>)
      <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>

      <div id="method-M000115" class="method-detail">
        <a name="M000115"></a>

        <div class="method-heading">
          <a href="#M000115" class="method-signature">
          <span class="method-name">add_option_delegator_for</span><span class="method-args">(key)</span>
          </a>
        </div>
      
        <div class="method-description">
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M000115-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M000115-source">
<pre>
<span class="ruby-comment cmt"># File lib/auth/configuration.rb, line 15</span>
      <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">add_option_delegator_for</span>(<span class="ruby-identifier">key</span>)
        <span class="ruby-identifier">define_method</span> <span class="ruby-node">&quot;#{key}_with_option_delegation=&quot;</span><span class="ruby-node">&quot;#{key}_with_option_delegation=&quot;</span> <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">value</span><span class="ruby-operator">|</span>
          <span class="ruby-identifier">res</span> = <span class="ruby-identifier">send</span>(<span class="ruby-node">&quot;#{key}_without_option_delegation=&quot;</span>, <span class="ruby-identifier">value</span>)
          <span class="ruby-identifier">authenticated_models</span>.<span class="ruby-identifier">each</span> { <span class="ruby-operator">|</span><span class="ruby-identifier">model</span><span class="ruby-operator">|</span> <span class="ruby-identifier">model</span>.<span class="ruby-identifier">set_default_option</span>(<span class="ruby-identifier">key</span>, <span class="ruby-identifier">value</span>) }
          <span class="ruby-identifier">res</span>
        <span class="ruby-keyword kw">end</span>

        <span class="ruby-identifier">alias_method_chain</span> <span class="ruby-node">&quot;#{key}=&quot;</span><span class="ruby-node">&quot;#{key}=&quot;</span>, <span class="ruby-identifier">:option_delegation</span>
      <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>

      <div id="method-M000117" class="method-detail">
        <a name="M000117"></a>

        <div class="method-heading">
          <a href="#M000117" class="method-signature">
          <span class="method-name">attr_accessor_with_delegator</span><span class="method-args">(*keys)</span>
          </a>
        </div>
      
        <div class="method-description">
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M000117-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M000117-source">
<pre>
<span class="ruby-comment cmt"># File lib/auth/configuration.rb, line 32</span>
      <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">attr_accessor_with_delegator</span>(<span class="ruby-operator">*</span><span class="ruby-identifier">keys</span>)
        <span class="ruby-identifier">result</span> = <span class="ruby-identifier">attr_accessor_without_delegator</span>(<span class="ruby-operator">*</span><span class="ruby-identifier">keys</span>)
        <span class="ruby-identifier">keys</span>.<span class="ruby-identifier">flatten</span>.<span class="ruby-identifier">each</span> { <span class="ruby-operator">|</span><span class="ruby-identifier">key</span><span class="ruby-operator">|</span> <span class="ruby-identifier">add_option_delegator_for</span>(<span class="ruby-identifier">key</span>) }
        <span class="ruby-identifier">result</span>
      <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>

      <div id="method-M000118" class="method-detail">
        <a name="M000118"></a>

        <div class="method-heading">
          <a href="#M000118" class="method-signature">
          <span class="method-name">attr_writer_with_delegator</span><span class="method-args">(*keys)</span>
          </a>
        </div>
      
        <div class="method-description">
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M000118-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M000118-source">
<pre>
<span class="ruby-comment cmt"># File lib/auth/configuration.rb, line 38</span>
      <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">attr_writer_with_delegator</span>(<span class="ruby-operator">*</span><span class="ruby-identifier">keys</span>)
        <span class="ruby-identifier">result</span> = <span class="ruby-identifier">attr_writer_without_delegator</span>(<span class="ruby-operator">*</span><span class="ruby-identifier">keys</span>)
        <span class="ruby-identifier">keys</span>.<span class="ruby-identifier">flatten</span>.<span class="ruby-identifier">each</span> { <span class="ruby-operator">|</span><span class="ruby-identifier">key</span><span class="ruby-operator">|</span> <span class="ruby-identifier">add_option_delegator_for</span>(<span class="ruby-identifier">key</span>) }
        <span class="ruby-identifier">result</span>
      <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>

      <div id="method-M000119" class="method-detail">
        <a name="M000119"></a>

        <div class="method-heading">
          <a href="#M000119" class="method-signature">
          <span class="method-name">behavior_configs</span><span class="method-args">()</span>
          </a>
        </div>
      
        <div class="method-description">
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M000119-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M000119-source">
<pre>
<span class="ruby-comment cmt"># File lib/auth/configuration.rb, line 48</span>
      <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">behavior_configs</span>
        <span class="ruby-ivar">@behavior_configs</span> <span class="ruby-operator">||=</span> []
        <span class="ruby-ivar">@behavior_configs</span>
      <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>

      <div id="method-M000125" class="method-detail">
        <a name="M000125"></a>

        <div class="method-heading">
          <a href="#M000125" class="method-signature">
          <span class="method-name">new</span><span class="method-args">()</span>
          </a>
        </div>
      
        <div class="method-description">
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M000125-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M000125-source">
<pre>
<span class="ruby-comment cmt"># File lib/auth/configuration.rb, line 283</span>
    <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">initialize</span>
      <span class="ruby-ivar">@password_format</span> = <span class="ruby-regexp re">/(?=[-_a-zA-Z0-9]*?[A-Z])(?=[-_a-zA-Z0-9]*?[a-z])(?=[-_a-zA-Z0-9]*?[0-9])[-_a-zA-Z0-9]{7,}/</span>
      <span class="ruby-ivar">@password_format_message</span> = <span class="ruby-value str">&quot;must contain at least 1 uppercase, 1 lowercase and 1 number&quot;</span>
      <span class="ruby-ivar">@minimum_password_length</span> = <span class="ruby-value">7</span>
      <span class="ruby-ivar">@path</span> = <span class="ruby-constant">File</span>.<span class="ruby-identifier">expand_path</span>(<span class="ruby-constant">File</span>.<span class="ruby-identifier">join</span>(<span class="ruby-constant">File</span>.<span class="ruby-identifier">dirname</span>(<span class="ruby-keyword kw">__FILE__</span>), <span class="ruby-value str">'..'</span>))
      <span class="ruby-ivar">@authenticated_models</span> = <span class="ruby-constant">Auth</span><span class="ruby-operator">::</span><span class="ruby-constant">TargetList</span>.<span class="ruby-identifier">new</span>
      <span class="ruby-ivar">@behaviors</span> = [ <span class="ruby-identifier">:core</span> ]
      <span class="ruby-ivar">@password_update_frequency</span> = <span class="ruby-value">30</span>.<span class="ruby-identifier">days</span>
      <span class="ruby-ivar">@encryptor</span> = <span class="ruby-constant">Auth</span><span class="ruby-operator">::</span><span class="ruby-constant">Encryptors</span><span class="ruby-operator">::</span><span class="ruby-constant">Sha512</span>
      <span class="ruby-ivar">@password_uniqueness_message</span> = <span class="ruby-value str">&quot;must not be the same as any of your recent passwords&quot;</span>
      <span class="ruby-ivar">@password_history_length</span> = <span class="ruby-value">4</span>
      <span class="ruby-ivar">@default_accounts_controller_name</span> = <span class="ruby-value str">&quot;sparkly_accounts&quot;</span>
      <span class="ruby-ivar">@default_sessions_controller_name</span> = <span class="ruby-value str">&quot;sparkly_sessions&quot;</span>
      <span class="ruby-ivar">@login_required_message</span> = <span class="ruby-value str">&quot;You must be signed in to view this page.&quot;</span>
      <span class="ruby-ivar">@logout_required_message</span> = <span class="ruby-value str">&quot;You must be signed out to view this page.&quot;</span>
      <span class="ruby-ivar">@invalid_credentials_message</span> = <span class="ruby-value str">&quot;Credentials were not valid.&quot;</span>
      <span class="ruby-ivar">@login_successful_message</span> = <span class="ruby-value str">&quot;Signed in successfully.&quot;</span>
      <span class="ruby-ivar">@default_destination</span> = <span class="ruby-value str">&quot;/&quot;</span>
      <span class="ruby-ivar">@base_controller_name</span> = <span class="ruby-value str">'application'</span>
      <span class="ruby-ivar">@session_duration</span> = <span class="ruby-value">30</span>.<span class="ruby-identifier">minutes</span>
      <span class="ruby-ivar">@logout_message</span> = <span class="ruby-value str">&quot;You have been signed out.&quot;</span>
      <span class="ruby-ivar">@session_timeout_message</span> = <span class="ruby-value str">&quot;You have been signed out due to inactivity. Please sign in again.&quot;</span>
      <span class="ruby-ivar">@default_login_path</span> = <span class="ruby-identifier">:new_user_session_path</span>
      <span class="ruby-ivar">@account_deleted_message</span> = <span class="ruby-value str">&quot;Your account has been deleted.&quot;</span>
      <span class="ruby-ivar">@account_created_message</span> = <span class="ruby-value str">&quot;Your account has been created.&quot;</span>
      <span class="ruby-ivar">@account_updated_message</span> = <span class="ruby-value str">&quot;Your changes have been saved.&quot;</span>
      <span class="ruby-ivar">@account_locked_message</span> = <span class="ruby-value str">&quot;Account is locked due to too many invalid attempts.&quot;</span>
      <span class="ruby-ivar">@account_lock_duration</span> = <span class="ruby-value">30</span>.<span class="ruby-identifier">minutes</span>
      <span class="ruby-ivar">@max_login_failures</span> = <span class="ruby-value">5</span>
      <span class="ruby-ivar">@generate_routes</span> = <span class="ruby-keyword kw">true</span>
      <span class="ruby-ivar">@login_after_signup</span> = <span class="ruby-keyword kw">false</span>
      
      <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">class</span>.<span class="ruby-identifier">behavior_configs</span>.<span class="ruby-identifier">each</span> <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">accessor_name</span>, <span class="ruby-identifier">config_klass</span><span class="ruby-operator">|</span>
        <span class="ruby-identifier">instance_variable_set</span>(<span class="ruby-node">&quot;@#{accessor_name}&quot;</span>, <span class="ruby-identifier">config_klass</span>.<span class="ruby-identifier">constantize</span>.<span class="ruby-identifier">new</span>(<span class="ruby-keyword kw">self</span>))
        <span class="ruby-identifier">singleton</span> = (<span class="ruby-keyword kw">class</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-keyword kw">self</span>; <span class="ruby-keyword kw">self</span>; <span class="ruby-keyword kw">end</span>)
        <span class="ruby-identifier">singleton</span>.<span class="ruby-identifier">send</span>(<span class="ruby-identifier">:define_method</span>, <span class="ruby-identifier">accessor_name</span>) { <span class="ruby-identifier">instance_variable_get</span>(<span class="ruby-node">&quot;@#{accessor_name}&quot;</span>) }
      <span class="ruby-keyword kw">end</span>
    <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>

      <div id="method-M000120" class="method-detail">
        <a name="M000120"></a>

        <div class="method-heading">
          <a href="#M000120" class="method-signature">
          <span class="method-name">register_behavior</span><span class="method-args">(name, behavior_class = lookup_behavior(name))</span>
          </a>
        </div>
      
        <div class="method-description">
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M000120-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M000120-source">
<pre>
<span class="ruby-comment cmt"># File lib/auth/configuration.rb, line 53</span>
      <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">register_behavior</span>(<span class="ruby-identifier">name</span>, <span class="ruby-identifier">behavior_class</span> = <span class="ruby-identifier">lookup_behavior</span>(<span class="ruby-identifier">name</span>))
        <span class="ruby-comment cmt"># If the behavior has a configuration, add it to self.</span>
        <span class="ruby-identifier">accessor_name</span> = <span class="ruby-identifier">name</span>
        <span class="ruby-identifier">name</span> = <span class="ruby-node">&quot;#{behavior_class.name}::Configuration&quot;</span>
        <span class="ruby-comment cmt"># we do this so that we can raise NameError now, not later.</span>
        <span class="ruby-identifier">behavior_configs</span> <span class="ruby-operator">&lt;&lt;</span> [ <span class="ruby-identifier">accessor_name</span>, <span class="ruby-identifier">name</span>.<span class="ruby-identifier">constantize</span>.<span class="ruby-identifier">name</span> ]
        <span class="ruby-comment cmt"># eg Auth.remember_me.something = 5</span>
        <span class="ruby-constant">Auth</span>.<span class="ruby-identifier">class</span>.<span class="ruby-identifier">delegate</span> <span class="ruby-identifier">accessor_name</span>, <span class="ruby-identifier">:to</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">:configuration</span>
      <span class="ruby-keyword kw">rescue</span> <span class="ruby-constant">NameError</span>
        <span class="ruby-comment cmt"># Presumably, the behavior does not have a configuration.</span>
      <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>

      <h3 class="section-bar">Public Instance methods</h3>

      <div id="method-M000126" class="method-detail">
        <a name="M000126"></a>

        <div class="method-heading">
          <a href="#M000126" class="method-signature">
          <span class="method-name">apply!</span><span class="method-args">()</span>
          </a>
        </div>
      
        <div class="method-description">
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M000126-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M000126-source">
<pre>
<span class="ruby-comment cmt"># File lib/auth/configuration.rb, line 322</span>
    <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">apply!</span>
      <span class="ruby-comment cmt"># all configurations are now applied through Auth::Model. If no models are being authenticated,</span>
      <span class="ruby-comment cmt"># then no authentication should be possible -- so what is there to apply?</span>
      
      <span class="ruby-comment cmt"># Apply options to authenticated models</span>
      <span class="ruby-identifier">authenticated_models</span>.<span class="ruby-identifier">each</span> <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">model</span><span class="ruby-operator">|</span>
        <span class="ruby-identifier">model</span>.<span class="ruby-identifier">apply_options!</span>
      <span class="ruby-keyword kw">end</span>
    <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>

      <div id="method-M000127" class="method-detail">
        <a name="M000127"></a>

        <div class="method-heading">
          <a href="#M000127" class="method-signature">
          <span class="method-name">authenticate</span><span class="method-args">(*model_names)</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
Accepts a list of model names (or the models themselves) and an optional
set of options which govern how the models will be authenticated.
</p>
<p>
Examples:
</p>
<pre>
  Auth.configure do |config|
    config.authenticate :user
    config.authenticate :admin, :key =&gt; :login
    config.authenticate :user, :admin, :with =&gt; /a password validating regexp/
  end
</pre>
<p>
Note that if an item is specified more than once, the options will be
merged together for the entry. For instance, in the above example, the
:user model will be authenticated with :password, while the :admin model
will be authenticated with :password on key :login.
</p>
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M000127-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M000127-source">
<pre>
<span class="ruby-comment cmt"># File lib/auth/configuration.rb, line 354</span>
    <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">authenticate</span>(<span class="ruby-operator">*</span><span class="ruby-identifier">model_names</span>)
      <span class="ruby-identifier">options</span> = <span class="ruby-identifier">model_names</span>.<span class="ruby-identifier">extract_options!</span>
      <span class="ruby-identifier">model_names</span>.<span class="ruby-identifier">flatten</span>.<span class="ruby-identifier">each</span> <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">name</span><span class="ruby-operator">|</span>
        <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">model</span> = <span class="ruby-identifier">authenticated_models</span>.<span class="ruby-identifier">find</span>(<span class="ruby-identifier">name</span>)
          <span class="ruby-identifier">model</span>.<span class="ruby-identifier">merge_options!</span> <span class="ruby-identifier">options</span>
        <span class="ruby-keyword kw">else</span>
          <span class="ruby-identifier">authenticated_models</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-constant">Auth</span><span class="ruby-operator">::</span><span class="ruby-constant">Model</span>.<span class="ruby-identifier">new</span>(<span class="ruby-identifier">name</span>, <span class="ruby-identifier">options</span>, <span class="ruby-identifier">to_hash</span>)
        <span class="ruby-keyword kw">end</span>
      <span class="ruby-keyword kw">end</span>
    <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>

      <div id="method-M000121" class="method-detail">
        <a name="M000121"></a>

        <div class="method-heading">
          <a href="#M000121" class="method-signature">
          <span class="method-name">base_controller</span><span class="method-args">()</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
Finds the controller with the same name as base_controller_name and returns
it.
</p>
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M000121-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M000121-source">
<pre>
<span class="ruby-comment cmt"># File lib/auth/configuration.rb, line 248</span>
    <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">base_controller</span>
      <span class="ruby-node">&quot;#{base_controller_name.to_s.camelize}Controller&quot;</span>.<span class="ruby-identifier">constantize</span>
    <span class="ruby-keyword kw">rescue</span> <span class="ruby-constant">NameError</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">err</span>
      <span class="ruby-keyword kw">begin</span>
        <span class="ruby-identifier">base_controller_name</span>.<span class="ruby-identifier">to_s</span>.<span class="ruby-identifier">camelize</span>.<span class="ruby-identifier">constantize</span>
      <span class="ruby-keyword kw">rescue</span> <span class="ruby-constant">NameError</span>
        <span class="ruby-comment cmt"># reraise the original error because '_controller' should have been omitted by convention. Also,</span>
        <span class="ruby-comment cmt"># the backtrace will be more useful.</span>
        <span class="ruby-identifier">raise</span> <span class="ruby-identifier">err</span>
      <span class="ruby-keyword kw">end</span>
    <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>

      <div id="method-M000122" class="method-detail">
        <a name="M000122"></a>

        <div class="method-heading">
          <a href="#M000122" class="method-signature">
          <span class="method-name">behavior_classes</span><span class="method-args">()</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
Returns the classes which represent each behavior listed in behaviors
</p>
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M000122-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M000122-source">
<pre>
<span class="ruby-comment cmt"># File lib/auth/configuration.rb, line 261</span>
    <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">behavior_classes</span>
      <span class="ruby-identifier">behaviors</span>.<span class="ruby-identifier">collect</span> { <span class="ruby-operator">|</span><span class="ruby-identifier">behavior</span><span class="ruby-operator">|</span> <span class="ruby-identifier">lookup_behavior</span>(<span class="ruby-identifier">behavior</span>) }
    <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>

      <div id="method-M000123" class="method-detail">
        <a name="M000123"></a>

        <div class="method-heading">
          <a href="#M000123" class="method-signature">
          <span class="method-name">disable_route_generation!</span><span class="method-args">()</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
Causes Sparkly <a href="../Auth.html">Auth</a> to <b>not</b> generate
routes by default. You&#8216;ll have to map them yourself if you disable
route generation.
</p>
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M000123-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M000123-source">
<pre>
<span class="ruby-comment cmt"># File lib/auth/configuration.rb, line 267</span>
    <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">disable_route_generation!</span>
      <span class="ruby-ivar">@generate_routes</span> = <span class="ruby-keyword kw">false</span>
    <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>

      <div id="method-M000128" class="method-detail">
        <a name="M000128"></a>

        <div class="method-heading">
          <a href="#M000128" class="method-signature">
          <span class="method-name">for_model</span><span class="method-args">(name_or_class_or_instance)</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
Returns the configuration for the given authenticated model.
</p>
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M000128-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M000128-source">
<pre>
<span class="ruby-comment cmt"># File lib/auth/configuration.rb, line 366</span>
    <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">for_model</span>(<span class="ruby-identifier">name_or_class_or_instance</span>)
      <span class="ruby-identifier">name_or_class</span> = <span class="ruby-identifier">name_or_class_or_instance</span>
      <span class="ruby-identifier">name_or_class</span> = <span class="ruby-identifier">name_or_class</span>.<span class="ruby-identifier">class</span> <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">name_or_class</span>.<span class="ruby-identifier">kind_of?</span>(<span class="ruby-constant">ActiveRecord</span><span class="ruby-operator">::</span><span class="ruby-constant">Base</span>)
      <span class="ruby-identifier">authenticated_models</span>.<span class="ruby-identifier">find</span>(<span class="ruby-identifier">name_or_class</span>)
    <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>

      <div id="method-M000124" class="method-detail">
        <a name="M000124"></a>

        <div class="method-heading">
          <a href="#M000124" class="method-signature">
          <span class="method-name">generate_routes?</span><span class="method-args">()</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
Returns true if Sparkly <a href="../Auth.html">Auth</a> is expected to
generate routes for this application. This is true by default, and can be
disabled with disable_route_generation!
</p>
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M000124-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M000124-source">
<pre>
<span class="ruby-comment cmt"># File lib/auth/configuration.rb, line 273</span>
    <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">generate_routes?</span>
      <span class="ruby-ivar">@generate_routes</span>
    <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>


    </div>


  </div>


<div id="validator-badges">
  <p><small><a href="http://validator.w3.org/check/referer">[Validate]</a></small></p>
</div>

</body>
</html>